on: push
name: on push
jobs:
  gitHubActionForPytest:
    name: GitHub Action for pytest
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Install python version
    # use the pyenv-action version 7
      uses: gabrielfalcao/pyenv-action@v7
      with:
        default: 3.7.12 # pick 3.8.6 verion 
        command: pip install -U pip  # upgrade pip after installing python
      
    - name: create environment
      run: pyenv local 3.8.6 && python -mvenv .venv386

    - name: Install dependencies
      run: pip install -r requirements.txt --upgrade pip


    - name: setup pyenv
      id: pyenv_installation
      uses: "gabrielfalcao/pyenv-action@v7"
        
    - uses: actions/checkout@main
    - name: GitHub Action for pytest
      uses: cclauss/GitHub-Action-for-pytest@master
      with:
        args: python setup.py develop && pytest
